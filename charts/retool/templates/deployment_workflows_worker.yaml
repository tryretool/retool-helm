{{ include "retool.worker.deployment" (dict "context" . "worker" (dict 
  "enabled" (include "retool.workflows.enabled" .)
  "name" (include "retool.workflowWorker.name" .)
  "selectorLabels" (include "retool.workflowWorker.selectorLabels" .)
  "labels" (include "retool.workflowWorker.labels" .)
  "containerName" "workflow-worker"
  "serviceType" "WORKFLOW_TEMPORAL_WORKER"
  "replicaCount" ((.Values.workflows.worker).replicaCount | default (.Values.workflows.replicaCount | default 1))
  "resources" (.Values.workflows.resources | default .Values.resources)
  "annotations" (.Values.workflows.annotations | default dict)
  "nodeOptions" ((.Values.workflows.config).nodeOptions | default "--max_old_space_size=1024")
  "healthcheckPort" "3005"
  "metricsPort" "9090"
  "prometheusAnnotations" true
  "config" (.Values.workflows.config | default dict)
  "dbConnectorTimeout" (.Values.workflows.dbConnectorTimeout | default (.Values.config.dbConnectorTimeout | default ""))
  "temporalConfig" (.Values.workflows.temporal | default .Values.temporal)
)) }}